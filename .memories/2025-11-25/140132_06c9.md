---
git:
  branch: main
  commit: a663127
  dirty: true
  files_changed:
  - .memories/plans/plan_implement-renamesymbol-tool.json
  - python/miller/storage/manager.py
  - python/miller/storage/mutations.py
  - python/miller/storage/queries.py
  - python/miller/storage/schema.py
  - python/miller/tools/search.py
  - python/miller/tools/symbols/analysis.py
  - python/miller/workspace/discovery.py
  - python/miller/workspace/scanner.py
  - python/tests/test_fast_search_toon.py
  - .memories/2025-11-25/134016_bad2.json
  - .memories/2025-11-25/134941_ce72.json
  - .memories/plans/plan_miller-performance-optimization-sprint.json
id: checkpoint_572f9cd2_56f31c
tags:
- performance
- n1
- batch-query
- fix
timestamp: 1764100892
type: checkpoint
---

Fixed N+1 query pattern in find_cross_language_variants (analysis.py). Changed from N queries (one per symbol) to 1 batch query. Approach: (1) collect all variants from all symbols upfront, (2) build reverse mapping variant_name -> symbol_ids, (3) single batch query with IN clause, (4) map results back. All 747 tests pass.
