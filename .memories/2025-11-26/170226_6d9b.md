---
git:
  branch: main
  commit: '8834447'
  dirty: true
  files_changed:
  - python/miller/embeddings/manager.py
  - python/miller/workspace/scanner.py
  - .memories/2025-11-26/163911_4c23.md
  - .memories/2025-11-26/164358_e65b.md
id: checkpoint_b6c3a65b_74a930
tags:
- bugfix
- directml
- memory
- oom
- batch-size
timestamp: 1764198146
type: checkpoint
---

Fixed DirectML memory issues: (1) Reduced file batch size from 50 to 10 to limit symbols per embedding call. (2) Reduced sentence-transformers batch_size to 8 for DirectML. (3) Added explicit memory cleanup (del + gc.collect) after each batch to prevent accumulation. This prevents 17GB+ memory usage that was causing OOM crashes.
