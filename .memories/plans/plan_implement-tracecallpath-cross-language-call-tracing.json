{
  "completed_at": 1763605797,
  "content": "## Goal\nImplement Miller's killer differentiator: cross-language call tracing using naming variants + semantic embeddings.\n\n## Success Criteria\n- Trace execution flow across language boundaries (TypeScript \u2192 Python \u2192 SQL)\n- Use naming variants (IUser \u2192 i_user \u2192 users) for matching\n- Fallback to semantic similarity for conceptual matches\n- Support upstream (callers), downstream (callees), both directions\n- Return results as JSON or tree format\n- Handle max_depth limiting (1-10, default 3)\n\n## Implementation Phases\n\n### Phase 1: Define Contract (Current - TDD Phase 1)\n- [ ] Define function signature and parameters\n- [ ] Define return types (TraceNode, TracePath)\n- [ ] Document expected inputs/outputs\n- [ ] List error conditions\n- [ ] Document boundary conditions\n\n### Phase 2: Write Tests (TDD Phase 2)\n- [ ] Test: Basic downstream trace (function \u2192 called functions)\n- [ ] Test: Basic upstream trace (function \u2192 callers)\n- [ ] Test: Cross-language trace (TS \u2192 Python \u2192 SQL)\n- [ ] Test: Naming variant matching (IUser \u2192 i_user)\n- [ ] Test: Max depth limiting\n- [ ] Test: Semantic similarity fallback\n- [ ] Test: Error handling (symbol not found)\n\n### Phase 3: Implement Core (TDD Phase 3)\n- [ ] Naming variant generator (snake, camel, pascal, kebab, screaming)\n- [ ] Relationship traversal logic (BFS/DFS)\n- [ ] Cross-language matching using variants\n- [ ] Semantic similarity scoring (embedding cosine distance)\n- [ ] Result formatting (JSON and tree)\n\n### Phase 4: Refactor (TDD Phase 4)\n- [ ] Extract variant logic to separate module\n- [ ] Optimize relationship queries\n- [ ] Add caching for repeated queries\n- [ ] Performance testing with large codebases\n\n## Technical Approach\n\n**Naming Variants:**\n- `UserService` \u2192 `user_service`, `userService`, `user-service`, `USER_SERVICE`\n- Query relationships table with all variants\n- Match symbols across languages\n\n**Semantic Fallback:**\n- If no variant matches, compute embedding similarity\n- Use threshold (>0.7) for conceptual matches\n- Useful for: `IUser` \u2192 `UserModel` \u2192 `UserEntity`\n\n**Data Sources:**\n- `symbol_relationships` table (already populated during indexing)\n- `symbols` table (for symbol metadata)\n- `embeddings` LanceDB (for semantic similarity)\n\n## References\n- TOOLS_PLAN.md lines 191-240 (trace_call_path specification)\n- Julie's trace_call_path module (reference implementation)",
  "git": {
    "branch": "main",
    "commit": "37c47d4",
    "dirty": false,
    "files_changed": []
  },
  "id": "plan_implement-tracecallpath-cross-language-call-tracing",
  "status": "completed",
  "timestamp": 1763604848,
  "title": "Implement trace_call_path - Cross-Language Call Tracing",
  "type": "plan"
}
